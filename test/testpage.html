<!Document>
<head>
    <link rel="stylesheet" type="text/css" href="../styles/imports.css">
    <link rel="stylesheet" type="text/css" href="../styles/layout.css">
    <link rel="stylesheet" type="text/css" href="../styles/nav.css">

    <link rel="stylesheet" type="text/css" href="/test/testcss.css">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Strixhaven - Administration</title>
    <link rel="icon" href="/assets/strix_logo.png">
</head>
<html>
<body>
    <!-- Header -->
    <header>
        <div class="logo">
            <a id="unilogo" href="about.html"><img src="/assets/strix_logo.png" /></a>
        </div>
        <div class="pagetitle" id="pagename">

        </div>
        <div class="thenavigation">
            <a id="navcontroller" class="fa fa-bars hamburger" onclick="swapnav('open')"></a>
        </div>
    </header>

    <!-- Navigation -->
    <nav id="navigation">
        <div class="cover" onclick="swapnav('close')"></div>
        <div class="NavContainer">
            <video id="navigationbgvideo" class="bgvid" src="/assets/Navigation.mp4" muted autoplay loop></video>
            <div class="close">
                <a id="navcontroller" class="fa fa-times" onclick="swapnav('close')"></a>
            </div>
            <div class="NavSubContainer">
                <a onclick="gopage('about')" id="aboutbtn">About</a>
                <a onclick="gopage('maps')" id="campmap">University Information</a>
                <a onclick="gopage('news')" id="news">Strixhaven Star</a>
                <a onclick="gopage('libary')" id="admin">Library</a>
                <a onclick="gopage('activities')" id="extcurr">Extracurriculars</a>
                <a onclick="gopage('admin')" id="admin">Administration</a>
                <a onclick="gopage('login')" id="login">Login</a>
                <div class="logState"></div>
            </div>
            <footer>
                <div>
                    Created by <a href="https://morganwilsonslider.wordpress.com" target="_blank">Morgan Wilson-Slider</a>
                </div>
            </footer>
        </div>
    </nav>

    <!-- Main -->
    <main>
        <div class="subnav" id="subNav">
            <a class="subnavControl" href="#lorehold">lorehold</a>
            <a class="subnavControl" href="#prismari">prismari</a>
            <a class="subnavControl" href="#silverquill">silverquill</a>
            <a class="subnavControl" href="#quandrix">quandrix</a>
            <a class="subnavControl" href="#witherbloom">witherbloom</a>
        </div>
        <div class="pageContainer">
            <div id="principle">
                <div class="principle">
                    <div class="left">
                        <img src="../../assets/teachers/Jadzi_the_Oracle.png" />
                    </div>
                    <div class="right">
                        <h1>Jadzi the Oracle</h1>
                        <h2>Principle</h2>
                        <p>
                            The title of Strixhavens Oracle is only granted to the wisest and most accomplished mage in the multiverse. In order to be the Oracle, one must understand the fundamental truths about the nature of magic and the building blocks of the world, know and wield hundreds if not thousands of spells, and possess impeccable judgment and virtue.

                            The title is currently held by Jadzi, an older human woman who graduated from Strixhaven long ago. With her incredible memory, the legends say she has memorized the location of every star arch on the plane.
                        </p>
                    </div>
                </div>
            </div>
            <div id="schools">
                <div class="school" id="lorehold" hidden>
                </div>
                <div class="school" id="prismari" hidden>
                </div>
                <div class="school" id="silverquill" hidden>
                </div>
                <div class="school" id="quandrix" hidden>
                </div>
                <div class="school" id="witherbloom" hidden>
                </div>
            </div>
        </div>
    </main>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.6.1.js"></script>
<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script src="../..//javascript/nav.js"></script>
<script src="../../API/api.js"></script>
<script src="../../javascript/preload.js"></script>
<script>
    var pageid = 'Administration';
    document.getElementById("pagename").innerHTML = pageid;
    $(function () {
        getPreloadedData();
    })

    // Local functions
    $("main .subnavControl").click(function () {
        // Set Subnav
        var subNavOptions = document.getElementById('subNav').querySelectorAll('a')
        var alreadyselected = "no";
        for (var x = 0; x < subNavOptions.length; x++) {
            if (this.innerText == subNavOptions[x].innerText) {
                if (this.classList == "subnavControl selected") {
                    alreadyselected = "yes";
                }
            }
            subNavOptions[x].classList = "subnavControl";
        }
        if (alreadyselected == "no") {
            this.classList = "subnavControl selected";
        }

        // Set Page
        var pages = document.getElementById('schools').querySelectorAll('.school')
        for (var x = 0; x < pages.length; x++) {
            pages[x].toggleAttribute('hidden', true);
            if (pages[x].id == this.innerText) {
                if (alreadyselected == "no") {
                    var selected = this.innerText;
                    document.getElementById('principle').toggleAttribute("hidden", true);
                    document.getElementById(selected).toggleAttribute("hidden");
                } else {
                    document.getElementById('principle').toggleAttribute("hidden");
                }
            }
        }

    });

    // Preload Data
    function getPreloadedData() {
        if (localStorage.getItem('teacherdata')) {
            sortPreloadedTeacherData(JSON.parse(localStorage.getItem('teacherdata')).value);
        } else {
            setTimeout(() => {
                getPreloadedData();
            }, "500");
        }
    }
    function sortPreloadedTeacherData(data) {
        var teachers = data;
        for (var x = 0; x < teachers.length; x++) {
            var teacher = teachers[x];

            var school = teacher['teacher_school'];
            var name = teacher['teacher_name'];
            var role = teacher['teacher_role'];
            var type = teacher['teacher_type'];
            var img = teacher['teacher_img'];
            var desc = teacher['teacher_description'];

            addElement(school, name, role, type, img, desc);

            var p = document.getElementById(name);
            if (p) {
                p.addEventListener("mouseover", toggleHidden);
            }
        }
    }
    // Create Cube
    function addElement(collegename, name, role, type, img, desc) {
        var college = document.getElementById(collegename);
        var status;

        if (role == "Dean") {
            status = role;
        } else {
            status = role + type;
        }

        var school = college.querySelector("#" + status + "s");
        if (!school) {            
            var newSchool = document.createElement("div");
            newSchool.id = status + "s";
            newSchool.classList = role + "s";
            college.appendChild(newSchool);
            school = college.querySelector("#" + status + "s");
        }
        
        var newTeacher = document.createElement("div");
        var newTextContainer = document.createElement("div");
        var newName = document.createElement("h2");
        var newRole = document.createElement("h3");
        var newDesc = document.createElement("p");
        var newImg = document.createElement("img");

        newName.innerText = name;
        newRole.innerText = role + " of " + type;
        newDesc.innerText = desc;
        newImg.src = "../assets/teachers/" + img;

        newTextContainer.classList = "textcontainer";

        newName.classList = "TName";
        newRole.classList = "TRole";
        newDesc.classList = "TDesc";
        newImg.classList = "TImg";

        newTeacher.classList = role.toLowerCase();

        newTextContainer.appendChild(newName);
        newTextContainer.appendChild(newRole);
        newTextContainer.appendChild(newDesc);

        newTeacher.appendChild(newImg);
        // newTeacher.appendChild(newTextContainer);


        school.appendChild(newTeacher);
        
    }
</script>
