<!Document>
<head>
    <link rel="stylesheet" type="text/css" href="/styles/imports.css">
    <link rel="stylesheet" type="text/css" href="/views/layout.css">
    <link rel="stylesheet" type="text/css" href="/views/nav.css">

    <link rel="stylesheet" type="text/css" href="/test/testcss.css">

    <title>Testing</title>
    <link rel="icon" href="/assets/strix_logo.png">
</head>
<html>
<body>
    <!-- Header -->
    <div data-include="header"></div>

    <!-- Navigation -->
    <div data-include="navigation"></div>

    <main>
        <div class="leftnav">
            <div class="block"></div>
            <div id="subnavchoices" class="choices">
                <p class="choice selected">Profile</p>
                <p class="choice">Details</p>
                <p class="choice">Courses</p>
                <p class="choice">Exams</p>
                <p class="choice">Relationships</p>
                <p class="choice">Job and Extra</p>
                <p class="choice" hidden>Coming Soon</p>
                <p class="choice">Account Details</p>
                <p class="choice">Logout</p>
            </div>
        </div>
        <div id="pages" class="mainpage">
            <div class="page" id="profile">
                <div class="controls">
                    <button id="edit" class="control fa fa-pencil-square-o"></button>
                    <button id="save" class="control fa fa-floppy-o"></button>
                </div>
                <h2>Profile</h2>
                <div class="mainbody">
                    <div class="top">
                        <div class="card">
                            <img id="profilepicture" src="../assets/students/players/Morgan.jpg" />
                        </div>
                        <form id="profileform1">
                            <label>Name: <input id="name" placeholder="Name" disabled /></label>
                            <label>Age: <input id="age" placeholder="Age" disabled /></label>
                            <label>Gender: <input id="gender" placeholder="Gender" disabled /></label>
                            <label>Race: <input id="race" placeholder="Race" disabled /></label>
                            <label>Subrace: <input id="subrace" placeholder="Subrace" disabled /></label>
                            <label>Alignment: <input id="alignment" placeholder="Alignment" disabled /></label>
                            <label>Hair Colour: <input id="haircolour" placeholder="Hair Colour" disabled /></label>
                            <label>Eye Colour: <input id="eyecolour" placeholder="Eye Colour" disabled /></label>
                        </form>
                        <form id="profileform2">
                            <label>Height: <input id="height" placeholder="Height" disabled /></label>
                            <label>Weight: <input id="weight" placeholder="Weight" disabled /></label>
                            <label>Level: <input id="level" placeholder="Level" disabled /></label>
                            <label>Class: <input id="class" placeholder="Class" disabled /></label>
                            <label>Subclass: <input id="subclass" placeholder="Subclass" disabled /></label>
                            <label>Background: <input id="background" placeholder="Background" disabled /></label>
                        </form>
                    </div>
                    <div class="bottom">
                        <div class="personality scrollbar">
                            <div class="personal">
                                <p>Personality Traits:</p>
                                <textarea id="personalitytraits" class="scrollbar" placeholder="Personality Traits" readonly></textarea>
                            </div>
                            <div class="personal">
                                <p>Ideals:</p>
                                <textarea id="ideals" class="scrollbar" placeholder="Ideals" readonly></textarea>
                            </div>
                            <div class="personal">
                                <p>Bonds:</p>
                                <textarea id="bonds" class="scrollbar" placeholder="Bonds" readonly></textarea>
                            </div>
                            <div class="personal">
                                <p>Flaws:</p>
                                <textarea id="flaws" class="scrollbar" placeholder="Flaws" readonly></textarea>
                            </div>
                            <div class="personal">
                                <p>Goals:</p>
                                <textarea id="goals" class="scrollbar" placeholder="Your life time desire" readonly></textarea>
                            </div>
                        </div>
                        <div class="right">
                            <div class="formfield">
                                <label>Background Features:</label>
                                <textarea id="backgroundfeatures"  class="scrollbar" placeholder="Background Features" readonly></textarea>
                            </div>
                            <div class="formfield">
                                <label>Additional Character Appearance:</label>
                                <textarea id="appearance" class="scrollbar" placeholder="Additional Character Appearance" readonly></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page" id="details" hidden>
                <div class="controls">
                    <button id="edit" class="control fa fa-pencil-square-o"></button>
                    <button id="save" class="control fa fa-floppy-o"></button>
                </div>
                <h2>Details</h2>
                <div class="mainpage">
                    <div class="split">
                        <p>Backstory:</p>
                        <textarea id="backstory" class="scrollbar" placeholder="Backstory"></textarea>
                    </div>
                    <div class="split">
                        <p>Extras:</p>
                        <textarea id="extranotes" class="scrollbar" placeholder="Extra notes"></textarea>
                    </div>
                </div>
            </div>
            <div class="page" id="courses" hidden>
                <h2>courses</h2>
            </div>
            <div class="page" id="exams" hidden>
                <h2>exams</h2>
            </div>
            <div class="page" id="relationships" hidden>
                <h2>relationships</h2>
            </div>
            <div class="page" id="jobandextra" hidden>
                <h2>jobandextra</h2>
            </div>
            <div class="page" id="account" hidden>
                <h2>account</h2>
            </div>
        </div>
    </main>

</body>
</html>
<script src="https://code.jquery.com/jquery-3.6.1.js"></script>
<script src="/javascript/nav.js"></script>
<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script>
    var pageid = 'Test page';
    $(function () {
        var includes = $('[data-include]')
        $.each(includes, function () {
            var file = '../views/addons/_' + $(this).data('include') + '.html'
            $(this).load(file)
        })
    })

    $('.choice').click(function () {
        var sidenav = document.getElementById('subnavchoices');
        var choices = sidenav.querySelectorAll('p');
        for (var x = 0; x < choices.length; x++){
            choices[x].classList = "choice";
        }
        this.classList = "choice selected";

        var mainpage = document.getElementById('pages');
        var pages = mainpage.querySelectorAll('.page');
        for (var x = 0; x < pages.length; x++) {
            if (pages[x]) {
                pages[x].setAttribute("hidden", "true");
            }
        }
        var toshow = this.innerText.toLowerCase();
        if (toshow == "job and extra") {
            toshow = "jobandextra";
        }
        if (toshow == "account details") {
            toshow = "account";
        }
        if (toshow == "logout") {
            toshow = "profile";
        }
        document.getElementById(toshow).toggleAttribute("hidden");
    })

    $('.control').click(function () {
        if (this.id == "edit") {
            if (this.classList != "fa fa-pencil-square-o activecontrol") {
                this.classList = "fa fa-pencil-square-o activecontrol";
                togglecurrent();
            } else {
                this.classList = "control fa fa-pencil-square-o";
                togglecurrent();
            }
        }
        if (this.id == "save") {

        }
    })

    function togglecurrent() {
        var mainpage = document.getElementById('pages');
        var pages = mainpage.querySelectorAll('.page');
        for (var x = 0; x < pages.length; x++) {
            if (pages[x]) {
                if (window.getComputedStyle(pages[x]).display != "none") {
                    var inputs = pages[x].querySelectorAll('input');
                    var textareas = pages[x].querySelectorAll('textarea');
                    for (var y = 0; y < inputs.length; y++) {
                        inputs[y].toggleAttribute("disabled");
                    }
                    for (var y = 0; y < textareas.length; y++) {
                        textareas[y].toggleAttribute("readonly");
                    }
                }
            }
        }
    }
</script>