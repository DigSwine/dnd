<!Document>
<head>
    <link rel="stylesheet" type="text/css" href="/style/imports.css">
    <link rel="stylesheet" type="text/css" href="/views/layout.css">
    <link rel="stylesheet" type="text/css" href="/views/nav.css">

    <link rel="stylesheet" type="text/css" href="/views/index.css">

    <title>Strixhaven - Home </title>
    <link rel="icon" href="/assets/strix_logo.png">

    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>
<html>
<body id="body">
    <!-- Header -->
    <div data-include="header"></div>

    <!-- Navigation -->
    <div data-include="navigation"></div>

    <!-- Background Video -->
    <section>
        <div class="video-container">
            <video id="myVideo" src="/assets/landing2.mp4"></video>
        </div>
    </section>

    <!-- Flashlight -->
    <div id="light" class="light"></div>

    <!-- Main -->
    <main>
        <div id="btn" class="btn">
            Click to begin your adventure
        </div>
    </main>
    <!-- Footer -->
    <div data-include="footer"></div>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.6.1.js"></script>
<script src="/javascript/nav.js"></script>
<script src="https://unpkg.com/@supabase/supabase-js"></script>
<script src="/javascript/cookies.js"></script>
<script src="/javascript/preload.js"></script>
<script>
    var pageid = '';
    $(function () {
        randomize();
        document.getElementById("btn").addEventListener("click", test);
        var includes = $('[data-include]')
        $.each(includes, function () {
            var file = 'views/addons/_' + $(this).data('include') + '.html'
            $(this).load(file)
        })

        document.getElementById('myVideo').addEventListener('ended', myHandler, false);
        function myHandler(e) {
           window.location = 'about.html';
        }

        // preload();
    })
    function test() {
        document.getElementById("btn").style.display = "none";
        document.getElementById("light").style.display = "none";
        document.getElementById("madeby").style.display = "none";
        document.getElementById("navcontroller").style.display = "none";
        try {
            document.getElementById("myVideo").play();
        } catch (err) {
            console.log(err)
        }
    }

    var light = document.querySelector('.light'),
        height = 200,
        width = 200;

    document.addEventListener('mousemove', function (e) {
        setPosition(e);
    });

    document.addEventListener('touchmove', function (e) {
        setPosition(e);
    });

    function setPosition(e) {
        light.style.opacity = 0.5;
        light.style.top = e.pageY + "px";
        light.style.left = e.pageX + "px";       
    }

    function randomize() {
        // get random number between 1 && 70 
        let x = Math.random() * 70;
        let y = Math.random() * 70;

        var btn = document.getElementById("btn");

        // assign to sections
        let z = Math.floor((Math.random() * 4) + 1);
        if (z == 1) {
            btn.style.top = y + "%";
            btn.style.left = y + "%";
        } else if (z == 2) {
            btn.style.bottom = y + "%";
            btn.style.left = y + "%";
        } else if (z == 3) {
            btn.style.bottom = y + "%";
            btn.style.right = y + "%";
        } else if (z == 4) {
            btn.style.top = y + "%";
            btn.style.right = y + "%";
        }
    }


</script>
