<!Document>
<head>
    <link rel="stylesheet" type="text/css" href="/style/styles.css">
</head>
<html>
<body>
    <main>
        <div class="header">
            <h1>Under Development</h1>
        </div>

        <div class="left-content">
            <h2>Houses</h2>

            <label for="houseSelection">House Name</label>
            <br />
            <select id="houseSelection">
                <option value="default"> --- Please Select --- </option>
            </select>

            <br /><br />

            <label for="houseSelection">Who belongs to the house</label>
            <br />
            <input class="housePeople" type="text" value="Teachers" disabled />
            <select id="houseTeachers" disabled>
                <option value="default"> --- Please Select --- </option>
            </select>

            <br /><br />

            <input class="housePeople" type="text" value="NPC Students" disabled />
            <select id="houseStudentNPCs" disabled>
                <option value="default"> --- Please Select --- </option>
            </select>

            <br /><br />

            <input class="housePeople" type="text" value="Player Students" disabled />
            <select id="houseStudentPlayers" disabled>
                <option value="default"> --- Please Select --- </option>
            </select>

            <br /><br />

            <label for="housePoints">House Points</label>
            <br />
            <input id="housePoints" class="housePeople" type="text" disabled />
        </div>
        <div class="right-content">
            <h2>People</h2>
            <div style="float:left; background-color:green; width:49%; padding-bottom:5px;">
                <label for="personalDetails" class="innerLabel">Personal Details</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Name" id="personalDetails" hidden />
                <br />
                <br />
                <label for="personName" class="innerLabel">Name</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Name" id="personName" disabled />
                <br />
                <br />
                <label for="personRace" class="innerLabel">Race</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Race" id="personRace" disabled />
                <br />
                <br />
                <label for="personGender" class="innerLabel">Gender</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Gender" id="personGender" disabled />
                <br />
                <br />
                <label for="personAge" class="innerLabel">Age</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Age" id="personAge" disabled />
                <br />
                <br />
                <label for="personD4" class="innerLabel">Detail 4</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Detail 4" id="personD4" disabled />
                <br />
                <br />
                <label for="personD5" class="innerLabel">Detail 5</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Detail 5" id="personD5" disabled />
                <br />
                <br />
                <label for="personD6" class="innerLabel">Detail 6</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Detail 6" id="personD6" disabled />
            </div>
            <div style="float:right; background-color:green; width:49%; padding-bottom:5px">
                <label for="personName" class="innerLabel">Relationships</label>
                <br />
                <input hidden />
                <br />
                <br />
                <label for="personName" class="innerLabel">Morgan</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Morgan" id="relMorgan" disabled />
                <br />
                <br />
                <label for="personName" class="innerLabel">Sami</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Sami" id="relSami" disabled />
                <br />
                <br />
                <label for="personName" class="innerLabel">Timo</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Timo" id="relTimo" disabled />
                <br />
                <br />
                <label for="personName" class="innerLabel">Martin</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Martin" id="relMartin" disabled />
                <br />
                <br />
                <label for="personName" class="innerLabel">Will</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Will" id="relWill" disabled />
                <br />
                <br />
                <label for="personName" class="innerLabel">Lover</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Lover" id="relLover" disabled />
                <br />
                <br />
                <label for="personName" class="innerLabel">Rival</label>
                <br />
                <input type="text" class="peopleInfo" placeholder="Rival" id="relRival" disabled />
            </div>
        </div>
        <div class="report-card">
            <div id="examDetails" class="examLeft">
                <label for="examSelection">Exam Number</label>
                <br />
                <select id="examSelection" disabled>
                    <option value="default"> --- Please Select --- </option>
                </select>
            </div>
            <div id="examResults" class="examCenter">

            </div>
            <div id="examExtenuating" class="examRight">
                <button onclick="saveAll()">testing</button>
            </div>

        </div>


    </main>
</body>
</html>

<script src="https://code.jquery.com/jquery-3.6.1.js"></script>

<script src="javascript/vars.js"></script>
<script>
    // examSelection

    // House Info Enable/Disable
    function unlockHouse(turn) {
        var names = ['houseTeachers', 'houseStudentNPCs', 'houseStudentPlayers', 'housePoints'];
        for (var x = 0; x < names.length; x++) {
            if (turn == "unlock") {
                document.getElementById(names[x]).removeAttribute("disabled");
            } else {
                $("#housePoints").val('');
                document.getElementById(names[x]).setAttribute('disabled', true);
            }
        }
    }

    // Exam Info Enable/Disable
    function unlockExam(turn) {
        var names = [];
        for (var x = 0; x < names.length; x++) {
            if (turn == "unlock") {
                document.getElementById(names[x]).removeAttribute("disabled");
            } else {
                $("#housePoints").val('');
                document.getElementById(names[x]).setAttribute('disabled', true);
            }
        }
    }
</script>
<script>
    $(document).ready(function () {
        //Houses
        for (var x = 0; x < TeacherName.length; x++) {
            $("#houseSelection").append('<option value="' + HouseName[x] + ' - ' + x + '">' + HouseName[x] + '</option>');
        }
    });

    // House Name Change
    $("#houseSelection").change(function () {
        var selectedval = $("#houseSelection option:selected").val();
        if (selectedval != "default") {
            changeSelectors(selectedval);
            unlockHouse("unlock");
        } else {
            changeSelectors('null')
            unlockHouse("lock");
        }
    });

    // Teacher Change
    $("#houseTeachers").change(function () {

    });

    // Student NPC Change
    $("#houseStudentNPCs").change(function () {
        var selectedval = $("#houseStudentNPCs option:selected").val();
        if (selectedval != "default") {
            getStudentData(selectedval);
            getReportCard(selectedval);
        }
    });

    // Student Player Change
    $("#houseStudentPlayers").change(function () {
        var selectedval = $("#houseStudentPlayers option:selected").val();
        if (selectedval != "default") {
            getStudentData(selectedval);
            getReportCard(selectedval);
        }
    });


    function changeSelectors(house) {
        var split = house.split(" - ");
        var house = split[0];

        removeAllSelectors();

        // Teacher
        for (var x = 0; x < TeacherName.length; x++) {
            if (TeacherHouse[x] == house) {
                $("#houseTeachers").append('<option value="' + TeacherName[x] + ' - ' + x + '">' + TeacherName[x] + '</option>');
            }
        }

        // Students
        for (var x = 0; x < StudentName.length; x++) {
            if (StudentHouse[x] == house) {
                if (StudentPlayer[x] == "No") {
                    $("#houseStudentNPCs").append('<option value="' + StudentName[x] + ' - ' + x + '">' + StudentName[x] + '</option>');
                } else if (StudentPlayer[x] == "Yes") {
                    $("#houseStudentPlayers").append('<option value="' + StudentName[x] + ' - ' + x + '">' + StudentName[x] + '</option>');
                }
            }
        }

        // Points
        for (var x = 0; x < StudentName.length; x++) {
            if (HouseName[x] == house) {
                $("#housePoints").val(HousePoints[x]);
            }
        }
    }

    function removeAllSelectors() {
        $("#houseTeachers").find('option').remove().end().append('<option> --- Please Select --- </option>').val('default');
        $("#houseStudentNPCs").find('option').remove().end().append('<option> --- Please Select --- </option>').val('default');
        $("#houseStudentPlayers").find('option').remove().end().append('<option> --- Please Select --- </option>').val('default');


        $("#houseTeachers").find('option:first').attr("selected", "selected");
        $("#houseStudentNPCs").find('option:first').attr("selected", "selected");
        $("#houseStudentPlayers").find('option:first').attr("selected", "selected");
    }

    function getStudentData(data) {
        var split = data.split(" - ");
        var student = split[0];

        for (var x = 0; x < StudentName.length; x++) {
            //loop through the students - check if the name is a match {if so then loop through txtboxs and fill in the the details}
            if (StudentName[x] == student) {
                // Personal Details
                $("#personName").val(StudentName[x]);
                $("#personRace").val(StudentRace[x]);
                $("#personGender").val(StudentGender[x]);
                $("#personAge").val(StudentAge[x]);
                $("#personD4").val(StudentDetail4[x]);
                $("#personD5").val(StudentDetail5[x]);
                $("#personD6").val(StudentDetail6[x]);

                // Relationships
                $("#relMorgan").val(RelMorgan[x]);
                $("#relSami").val(RelSami[x]);
                $("#relTimo").val(RelTimo[x]);
                $("#relMartin").val(RelMart[x]);
                $("#relWill").val(RelWill[x]);
                $("#relLover").val(RelLover[x]);
                $("#relRival").val(RelRival[x]);
            }
        }
    }

    function getReportCard(data) {
        var split = data.split(" - ");
        var student = split[0];

        document.getElementById('examSelection').removeAttribute("disabled");

        // Exam Number
        for (var x = 0; x < ExamNumber.length; x++) {
            $("#examSelection").append('<option value="' + ExamNumber[x] + ' - ' + x + '">' + ExamNumber[x] + '</option>');
        }

        for (var x = 0; x < ExamPerson.length; x++) {

        }
    }

</script>

<script>
    function saveAll() {
        /*
        var data1 = "sample1";
        var data2 = "sample2";
        //converting form data to json
        var formdata = JSON.stringify({
            "Data_1": data1,
            "Data_2": data2
        });
        formdata = "values=" + formdata;
        console.log(formdata);
        $.ajax({
            type: "GET",
            url: "saveData.php",
            data: formdata,
            error: function (xhr, textStatus, error) {
                console.log(xhr.statusText);
            },
            success: function (text, status) {
                console.log(text);
            }
        });
        */

        dataString = $("#JqAjaxForm").serialize();

        $.post("API/saveData.php", $("#JqPostForm").serialize(),
            function (data) {
                if (data.email_check == 'invalid') {

                    $("#message_post").html("<div class='errorMessage'>Sorry " + data.name + ", " + data.email + " is NOT a valid e-mail address. Try again.</div>");
                } else {
                    $("#message_post").html("<div class='successMessage'>" + data.email + " is a valid e-mail address. Thank you, " + data.name + ".</div>");
                }
            }, "json");  

    }
</script>